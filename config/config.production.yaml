# 生产环境配置
debug: false
environment: production

# 服务配置
server:
  host: "0.0.0.0"
  port: 8000
  workers: 4
  reload: false

# 数据库配置
database:
  url: ""  # 从环境变量 DATABASE_URL 读取
  echo: false
  pool_size: 20
  max_overflow: 40

# 嵌入模型配置
embeddings:
  model: "BAAI/bge-large-zh-v1.5"
  device: "cuda"  # 生产环境使用GPU
  normalize: true

# LLM配置
llm:
  provider: "openai"
  model: "gpt-4-turbo-preview"
  temperature: 0.7
  max_tokens: 2000
  timeout: 60
  retry:
    max_attempts: 5
    base_delay: 2.0

# 记忆配置
memory:
  max_short_term: 10000
  consolidation_threshold: 0.7
  auto_decay: true
  decay_rate: 0.005

# 知识图谱配置
knowledge_graph:
  max_nodes: 100000
  max_edges: 500000
  auto_prune: true
  prune_threshold: 90  # 天

# 推荐配置
recommendations:
  enabled: true
  max_daily: 20
  min_confidence: 0.7
  update_interval: 1800  # 秒

# 日志配置
logging:
  level: "WARNING"
  format: "json"
  file: "/var/log/pos/app.log"
  max_size: "100MB"
  backup_count: 30

# 隐私配置
privacy:
  privacy_mode: false
  encrypt_sensitive: true
  local_only: false
  sensitive_fields:
    - "password"
    - "token"
    - "secret"
    - "credit_card"
    - "ssn"
    - "phone"
    - "email"

# 熔断器配置
circuit_breaker:
  enabled: true
  failure_threshold: 5
  recovery_timeout: 60
  half_open_max_calls: 3

# 外部服务配置
external:
  openai:
    api_key: ""  # 从环境变量 OPENAI_API_KEY 读取
    base_url: "https://api.openai.com/v1"
  
  anthropic:
    api_key: ""  # 从环境变量 ANTHROPIC_API_KEY 读取
  
  huggingface:
    token: ""  # 从环境变量 HF_TOKEN 读取
  
  sentry:
    dsn: ""  # 从环境变量 SENTRY_DSN 读取
    environment: "production"
    traces_sample_rate: 0.05

# 前端配置
frontend:
  url: "https://pos.example.com"
  api_path: "/api"
  ws_path: "/ws"

# 安全配置
security:
  cors_origins:
    - "https://pos.example.com"
  rate_limit:
    enabled: true
    requests_per_minute: 100
  jwt:
    algorithm: "HS256"
    access_token_expire_minutes: 30
    refresh_token_expire_days: 7

# 缓存配置
cache:
  type: "redis"  # redis, memory
  url: ""  # 从环境变量 REDIS_URL 读取
  ttl: 3600
